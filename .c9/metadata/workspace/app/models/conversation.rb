{"changed":true,"filter":false,"title":"conversation.rb","tooltip":"/app/models/conversation.rb","value":"class Conversation < ActiveRecord::Base\n\tbelongs_to :sender, foreign_key: :sender_id, class_name: 'User'\n\tbelongs_to :recipient, foreign_key: :recipient_id, class_name: 'User'\n\n\thas_many :messages, dependent: :destroy\n\n\tvalidates_uniqueness_of :sender_id, scope: :recipient_id\n\n\tscope :involving, -> (user) do\n\t\twhere(\"conversations.sender_id = ? OR conversations.recipient_id = ?\", user.id, user.id)\n\tend\n\n\tscope :between, -> (sender_id, recipient_id) do\n\t\twhere(\"(conversations.sender_id = ? AND conversations.recipient_id = ?) OR (conversations.sender_id = ? AND conversations.recipient_id = ?)\", \n\t\t\t\t\tsender_id, recipient_id, recipient_id, sender_id)\n\tend\n\nend\n","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":17,"column":3},"action":"remove","lines":["class Conversation < ActiveRecord::Base","\tbelongs_to :sender, foreign_key: :sender_id, class_name: 'User'","\tbelongs_to :recipient, foreign_key: :recipient_id, class_name: 'User'","","\thas_many :messages, dependent: :destroy","","\tvalidates_uniqueness_of :sender_id, scope: :recipient_id","","\tscope :involving, -> (user) do","\t\twhere(\"conversations.sender_id = ? OR conversations.recipient_id = ?\", user.id, user.id)","\tend","","\tscope :between, -> (sender_id, recipient_id) do","\t\twhere(\"(conversations.sender_id = ? AND conversations.recipient_id = ?) OR (conversations.sender_id = ? AND conversations.recipient_id = ?)\", ","\t\t\t\t\tsender_id, recipient_id, recipient_id, sender_id)","\tend","","end"],"id":586},{"start":{"row":0,"column":0},"end":{"row":18,"column":0},"action":"insert","lines":["class Conversation < ActiveRecord::Base","\tbelongs_to :sender, foreign_key: :sender_id, class_name: 'User'","\tbelongs_to :recipient, foreign_key: :recipient_id, class_name: 'User'","","\thas_many :messages, dependent: :destroy","","\tvalidates_uniqueness_of :sender_id, scope: :recipient_id","","\tscope :involving, -> (user) do","\t\twhere(\"conversations.sender_id = ? OR conversations.recipient_id = ?\", user.id, user.id)","\tend","","\tscope :between, -> (sender_id, recipient_id) do","\t\twhere(\"(conversations.sender_id = ? AND conversations.recipient_id = ?) OR (conversations.sender_id = ? AND conversations.recipient_id = ?)\", ","\t\t\t\t\tsender_id, recipient_id, recipient_id, sender_id)","\tend","","end",""]}],[{"start":{"row":11,"column":0},"end":{"row":12,"column":0},"action":"remove","lines":["",""],"id":587}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":12,"column":8},"end":{"row":12,"column":8},"isBackwards":false},"options":{"tabSize":2,"useSoftTabs":false,"guessTabSize":false,"useWrapMode":true,"wrapToView":true},"firstLineState":{"row":69,"mode":"ace/mode/ruby"}},"timestamp":1501977841340}